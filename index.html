<!DOCTYPE html>
<html>

<head>
    <title>Calculator</title>
    <style>
        #calculatorDisplay {
            display: grid;
            grid-template-columns: auto;
            justify-items: stretch;
            width: 400px;
            height: 50px;
            margin: 0 auto;
            background-color: #7dbf79;
        }

        #calculatorKeypad {
            display: grid;
            grid-template-columns: auto auto auto auto auto;
            justify-items: stretch;
            width: 400px;
            height: 400px;
            margin: 0 auto;
        }

        button {
            padding: 10px;
            margin: 10px;
        }
    </style>
</head>

<body>
    <div id="calculator">
        <div id="calculatorDisplay">
            <div id="display"></div>
        </div>
        <div id="calculatorKeypad">
            <button class="displayable" id="7">7</button>
            <button class="displayable" id="8">8</button>
            <button class="displayable" id="9">9</button>
            <div class="button" id="space1"></div>
            <button class="button" id="cancel">Cancel</button>
            <button class="displayable" id="4">4</button>
            <button class="displayable" id="5">5</button>
            <button class="displayable" id="6">6</button>
            <button class="displayable" id="x">x</button>
            <button class="displayable" id="/">/</button>
            <button class="displayable" id="1">1</button>
            <button class="displayable" id="2">2</button>
            <button class="displayable" id="3">3</button>
            <button class="displayable" id="+">+</button>
            <button class="displayable" id="-">-</button>
            <div class="button" id="space2"></div>
            <button class="displayable" id="0">0</button>
            <div class="button" id="space3"></div>
            <div class="button" id="space4"></div>
            <button class="button" id="=">=</button>
        </div>
    </div>
    <script>
        function add(num1, num2) { solution = (parseInt(num1) + parseInt(num2)); }
        function subtract(num1, num2) { solution = (parseInt(num1) - parseInt(num2)); }
        function multiply(num1, num2) { solution = (parseInt(num1) * parseInt(num2)); }
        function buttonide(num1, num2) { solution = (parseInt(num1) / parseInt(num2)); }

        function operate(operator, num1, num2) {
            switch (operator) {
                case "+": add(num1, num2);
                    break;
                case "-": subtract(num1, num2);
                    break;
                case "x": multiply(num1, num2);
                    break;
                case "/": buttonide(num1, num2);
            }
        }

        let display = document.getElementById("display");
        let displayContent = "";
        let solution = 0;
        let digits = [];
        let operator;
        let num1;
        let num2;
        let operators = []
        let operands;

        function addToDisplay(element) {
            displayContent += element;
            display.innerHTML = displayContent;
        }

        function clearDisplay() {
            displayContent = "";
            display.innerHTML = displayContent;
            solution = 0;
        }

        const buttons = document.querySelectorAll("button")
        buttons.forEach((button) => {
            if (button.className === "displayable") {
                button.addEventListener('click', (e) => {
                    addToDisplay(button.id);
                });
            }
        });

        let equalsButton = document.getElementById("=");
        equalsButton.addEventListener('click', (e) => {
            findOperands(displayContent);
            findOperators(displayContent);
            findSolution();
        })

        function findOperands(stringToCheck) {
            operands = stringToCheck.split(/[^0-9]/);
        }

        function findOperators(stringToCheck) {
            operators = stringToCheck.split(/[0-9]/).filter(v => v !== "");
        }

        let cancelButton = document.getElementById("cancel");
        cancelButton.addEventListener('click', (e) => {
            clearDisplay();
        });

        function findSolution() {
            // for (let i = 0; i < operands.length - 1; i++) {
            //     operandIndex = displayContent.indexOf(operands[i]);
            //     operatorIndex = operandIndex + (operands[i].length);
            //     operator = displayContent.charAt(operatorIndex);
            //     operate(operator, operands[i], operands[i + 1]);
            //    displayContent = solution + "" + displayContent.slice(displayContent.search(/[^0-9]/))
            // }

            while(operators.length!=0){
            operate(operators[0], operands[0], operands[1]);
            operands.shift();
            operands.shift();
            operands.splice(0,0,solution)
            operators.shift();
            }
        }

        // maybe  ahwile loop while operators[] still exist
        // keep doing something and remove operators and operands with each iteration
        // removing for loop with i and stuff
        // display content could = solution + a slice on the search for the regex value 





    </script>
</body>

</html>